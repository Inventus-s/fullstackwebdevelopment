<!DOCTYPE html>
<html>
<head>
    <title>Product Catalog</title>
    <style>
        /* ... CSS styles ... */
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: -10px;
        }
        
        .col {
            width: 25%;
            padding: 10px;
        }
        
        .card {
            background-color: #f5f5f5;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
        }
        
        .card img {
            max-width: 100%;
            height: auto;
            margin-bottom: 10px;
        }
        
        .card h3 {
            margin: 0;
            font-size: 18px;
        }
        
        .card p {
            margin: 10px 0;
            font-size: 14px;
        }
        
        .cart {
            margin-top: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .cart h2 {
            margin-top: 0;
        }
        
        .cart-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .cart-item img {
            width: 50px;
            height: auto;
            margin-right: 10px;
        }
        
        .cart-item p {
            margin: 0;
            flex-grow: 1;
        }
        
        .cart-item button {
            margin-left: 10px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Product Catalog</h2>
        <div class="row" id="productRow">
            <!-- Product cards will be displayed here -->
        </div>
    </div>

    <div class="cart-overlay" id="cartOverlay">
        <div class="cart">
            <h2>Cart</h2>
            <div id="cartItems">
                <!-- Cart items will be displayed here -->
            </div>
            <button id="closeCartBtn">Close</button>
        </div>
    </div>

    <script>
        fetch("https://fakestoreapi.com/products")
            .then(function (response) {
                if (!response.ok) {
                    throw new Error("Failed to fetch products.");
                }
                return response.json();
            })
            .then(function (products) {
                displayProducts(products);
            })
            .catch(function (error) {
                console.log("Error:", error.message);
            });

        function displayProducts(products) {
            var productRow = document.getElementById("productRow");

            products.forEach(function (product) {
                var col = document.createElement("div");
                col.className = "col";

                var card = document.createElement("div");
                card.className = "card";

                var image = document.createElement("img");
                image.src = product.image;
                card.appendChild(image);

                var title = document.createElement("h3");
                title.textContent = product.title;
                card.appendChild(title);

                var price = document.createElement("p");
                price.textContent = "$" + product.price.toFixed(2);
                card.appendChild(price);

                var addToCartBtn = document.createElement("button");
                addToCartBtn.textContent = "Add to Cart";
                addToCartBtn.addEventListener("click", function () {
                    addToCart(product);
                });
                card.appendChild(addToCartBtn);

                card.addEventListener("click", function () {
                    redirectToProductPage(product.id);
                });

                col.appendChild(card);
                productRow.appendChild(col);
            });
        }

        function redirectToProductPage(productId) {
            localStorage.setItem("productId", productId);
            window.location.href = "product.html";
        }

        function addToCart(product) {
            var cartItems = localStorage.getItem("cartItems");
            var cartItemsArray = cartItems ? JSON.parse(cartItems) : [];
            var existingItem = cartItemsArray.find(function (item) {
                return item.id === product.id;
            });
            if (existingItem) {
                existingItem.quantity++;
            } else {
                product.quantity = 1;
                cartItemsArray.push(product);
            }
            localStorage.setItem("cartItems", JSON.stringify(cartItemsArray));
            showCart();
        }

        function showCart() {
            var cartOverlay = document.getElementById("cartOverlay");
            var cartItemsContainer = document.getElementById("cartItems");
            var closeCartBtn = document.getElementById("closeCartBtn");

            cartItemsContainer.innerHTML = "";

            var cartItems = JSON.parse(localStorage.getItem("cartItems"));

            if (cartItems && cartItems.length > 0) {
                cartItems.forEach(function (item) {
                    var cartItem = document.createElement("div");
                    cartItem.className = "cart-item";

                    var image = document.createElement("img");
                    image.src = item.image;
                    cartItem.appendChild(image);

                    var info = document.createElement("div");
                    info.className = "cart-item-info";

                    var title = document.createElement("h4");
                    title.textContent = item.title;
                    info.appendChild(title);

                    var price = document.createElement("p");
                    price.textContent = "$" + item.price.toFixed(2);
                    info.appendChild(price);

                    var quantity = document.createElement("p");
                    quantity.textContent = "Quantity: " + item.quantity;
                    info.appendChild(quantity);

                    cartItem.appendChild(info);
                    cartItemsContainer.appendChild(cartItem);
                });
            } else {
                var emptyMessage = document.createElement("p");
                emptyMessage.textContent = "Your cart is empty.";
                cartItemsContainer.appendChild(emptyMessage);
            }

            cartOverlay.style.display = "block";

            closeCartBtn.addEventListener("click", function () {
                cartOverlay.style.display = "none";
            });
        }
    </script>
</body>
</html>
